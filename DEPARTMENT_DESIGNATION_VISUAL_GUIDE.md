# ğŸ¨ Department & Designation - Visual Data Flow

## ğŸ“Š Complete System Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ADMIN DASHBOARD (Frontend)                   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Create New Doctor Form                                 â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚   â”‚
â”‚  â”‚  Name: [__________________]                            â”‚   â”‚
â”‚  â”‚  Email: [__________________]                           â”‚   â”‚
â”‚  â”‚  Password: [__________________]                        â”‚   â”‚
â”‚  â”‚  Role: [Doctor â–¼]                                      â”‚   â”‚
â”‚  â”‚  Department: [Cardiology Department__]  â† NEW FIELD    â”‚   â”‚
â”‚  â”‚  Designation: [Senior Resident â–¼]      â† NEW FIELD    â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  [Create User Button]                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                      â”‚
â”‚                          â”‚ POST Request                         â”‚
â”‚                          â–¼                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ /api/auth/register
                           â”‚ {
                           â”‚   name, email, password,
                           â”‚   role: "doctor",
                           â”‚   licenseNumber, specialty,
                           â”‚   department: "Cardiology",     â† SENT
                           â”‚   designation: "Senior Resident" â† SENT
                           â”‚ }
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND (auth.js)                             â”‚
â”‚                                                                  â”‚
â”‚  POST /api/auth/register                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚
â”‚                                                                  â”‚
â”‚  1. Extract fields from req.body:                               â”‚
â”‚     âœ“ name, email, password, role                              â”‚
â”‚     âœ“ licenseNumber, specialty                                 â”‚
â”‚     âœ“ department, designation  â† NOW HANDLED                   â”‚
â”‚                                                                  â”‚
â”‚  2. Create User document:                                       â”‚
â”‚     new User({ email, role, status, password })                â”‚
â”‚                                                                  â”‚
â”‚  3. Create Doctor profile:                                      â”‚
â”‚     new Doctor({                                                â”‚
â”‚       user: user._id,                                           â”‚
â”‚       name, email, licenseNumber, specialty,                   â”‚
â”‚       department: department || '',         â† SAVED            â”‚
â”‚       designation: designation || 'Other'    â† SAVED            â”‚
â”‚     })                                                          â”‚
â”‚                                                                  â”‚
â”‚  4. Return: { user, profile }                                   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Saved to MongoDB
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATABASE (MongoDB)                            â”‚
â”‚                                                                  â”‚
â”‚  Users Collection:                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚ _id: ObjectId("...")                  â”‚                     â”‚
â”‚  â”‚ email: "john.smith@hospital.com"      â”‚                     â”‚
â”‚  â”‚ role: "doctor"                        â”‚                     â”‚
â”‚  â”‚ status: "active"                      â”‚                     â”‚
â”‚  â”‚ password: <hashed>                    â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                  â”‚
â”‚  Doctors Collection:                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚ _id: ObjectId("...")                  â”‚                     â”‚
â”‚  â”‚ user: ObjectId("...")                 â”‚                     â”‚
â”‚  â”‚ name: "Dr. John Smith"                â”‚                     â”‚
â”‚  â”‚ email: "john.smith@hospital.com"      â”‚                     â”‚
â”‚  â”‚ licenseNumber: "TEMP-1234567890"      â”‚                     â”‚
â”‚  â”‚ specialty: "General Practice"         â”‚                     â”‚
â”‚  â”‚ department: "Cardiology Department"   â”‚ â† STORED âœ“         â”‚
â”‚  â”‚ designation: "Senior Resident"        â”‚ â† STORED âœ“         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Update Flow (Existing Doctor)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ADMIN DASHBOARD (Frontend)                   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Edit Doctor: Dr. John Smith                           â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚   â”‚
â”‚  â”‚  Name: [Dr. John Smith_______]                         â”‚   â”‚
â”‚  â”‚  Email: [john.smith@hospital.com]                      â”‚   â”‚
â”‚  â”‚  Status: [Active â–¼]                                    â”‚   â”‚
â”‚  â”‚  Department: [Emergency Medicine__]  â† CHANGE          â”‚   â”‚
â”‚  â”‚  Designation: [Consultant â–¼]        â† CHANGE          â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  [Save Changes Button]                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                      â”‚
â”‚                          â”‚ PUT Request                          â”‚
â”‚                          â–¼                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ /api/users/:id
                           â”‚ {
                           â”‚   name: "Dr. John Smith",
                           â”‚   email: "john.smith@hospital.com",
                           â”‚   status: "active",
                           â”‚   department: "Emergency Medicine",  â† SENT
                           â”‚   designation: "Consultant"          â† SENT
                           â”‚ }
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND (users.js)                            â”‚
â”‚                                                                  â”‚
â”‚  PUT /api/users/:id                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                            â”‚
â”‚                                                                  â”‚
â”‚  1. Extract fields from req.body:                               â”‚
â”‚     { name, email, role, status, department, designation }     â”‚
â”‚                                                                  â”‚
â”‚  2. Update User document:                                       â”‚
â”‚     User.findByIdAndUpdate(id, { status, email })              â”‚
â”‚                                                                  â”‚
â”‚  3. Update Doctor profile:                                      â”‚
â”‚     Doctor.findOneAndUpdate(                                    â”‚
â”‚       { user: id },                                             â”‚
â”‚       {                                                         â”‚
â”‚         name, email,                                            â”‚
â”‚         department: department,      â† UPDATED âœ“               â”‚
â”‚         designation: designation     â† UPDATED âœ“               â”‚
â”‚       }                                                         â”‚
â”‚     )                                                           â”‚
â”‚                                                                  â”‚
â”‚  4. Return: updated user                                        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Designation Options (Enum Values)

The `designation` field accepts these values:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Hospital Hierarchy              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ‘¨â€âš•ï¸ Junior Level:                â”‚
â”‚    â€¢ Intern                      â”‚
â”‚    â€¢ Junior Resident             â”‚
â”‚    â€¢ Senior Resident             â”‚
â”‚    â€¢ Registrar                   â”‚
â”‚                                  â”‚
â”‚  ğŸ‘¨â€âš•ï¸ Mid Level:                  â”‚
â”‚    â€¢ Consultant                  â”‚
â”‚    â€¢ Specialist                  â”‚
â”‚    â€¢ Senior Specialist           â”‚
â”‚    â€¢ Visiting Doctor             â”‚
â”‚                                  â”‚
â”‚  ğŸ‘¨â€âš•ï¸ Senior Level:               â”‚
â”‚    â€¢ Assistant Professor         â”‚
â”‚    â€¢ Associate Professor         â”‚
â”‚    â€¢ Professor                   â”‚
â”‚    â€¢ Chief Specialist            â”‚
â”‚                                  â”‚
â”‚  ğŸ‘¨â€âš•ï¸ Leadership:                 â”‚
â”‚    â€¢ Unit Head                   â”‚
â”‚    â€¢ Medical Superintendent      â”‚
â”‚    â€¢ Chief Medical Officer       â”‚
â”‚    â€¢ Medical Director            â”‚
â”‚                                  â”‚
â”‚  ğŸ‘¨â€âš•ï¸ Fellowship:                 â”‚
â”‚    â€¢ Clinical Fellow             â”‚
â”‚    â€¢ Research Fellow             â”‚
â”‚    â€¢ Honorary Consultant         â”‚
â”‚                                  â”‚
â”‚  ğŸ‘¨â€âš•ï¸ Other:                      â”‚
â”‚    â€¢ Other (default)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Quick Reference: Which Endpoint Does What?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Endpoint            â”‚  Purpose         â”‚  Department  â”‚  Designation â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  POST /auth/register â”‚  Create new user â”‚      âœ…      â”‚      âœ…      â”‚
â”‚  POST /users         â”‚  Create new user â”‚      âœ…      â”‚      âœ…      â”‚
â”‚  PUT  /users/:id     â”‚  Update user     â”‚      âœ…      â”‚      âœ…      â”‚
â”‚  GET  /users         â”‚  List all users  â”‚  (returns)  â”‚  (returns)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ… Implementation Status

```
Frontend (AdminDashboard.tsx)
  â””â”€ Sends department field        âœ… WORKING
  â””â”€ Sends designation field       âœ… WORKING

Backend (auth.js)
  â””â”€ POST /register route          âœ… CREATED
  â””â”€ Accepts department            âœ… IMPLEMENTED
  â””â”€ Accepts designation           âœ… IMPLEMENTED
  â””â”€ Saves to Doctor model         âœ… IMPLEMENTED

Backend (users.js)
  â””â”€ POST / route                  âœ… UPDATED
  â””â”€ Accepts designation           âœ… IMPLEMENTED
  â””â”€ PUT /:id route                âœ… ALREADY WORKING
  â””â”€ Updates department            âœ… ALREADY WORKING
  â””â”€ Updates designation           âœ… ALREADY WORKING

Database (Doctor Model)
  â””â”€ department field              âœ… EXISTS
  â””â”€ designation field             âœ… EXISTS
  â””â”€ Enum validation               âœ… EXISTS
```

---
**Status:** âœ… COMPLETE - Ready for use!
